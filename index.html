<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breaking News - Content Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-100 min-h-screen pb-20">

    <header class="bg-slate-900 text-white py-6 mb-8 shadow-md">
        <div class="max-w-4xl mx-auto px-4">
            <h1 class="text-2xl font-black italic tracking-tighter uppercase">News<span class="text-red-500">Generator</span></h1>
            <p class="text-slate-400 text-sm">Buat dan unduh halaman berita instan untuk GitHub</p>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 grid md:grid-cols-2 gap-8">
        
        <!-- Form Input -->
        <section class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
            <h2 class="font-bold text-lg mb-4 text-slate-800 border-b pb-2">Input Article Data</h2>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Article Title</label>
                    <input type="text" id="title" placeholder="Enter headline here..." class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none transition-all">
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Category</label>
                    <input type="text" id="category" placeholder="e.g. Technology, Business, Sports" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none transition-all">
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Image URL</label>
                    <input type="text" id="imageUrl" placeholder="https://images.unsplash.com/..." class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none transition-all">
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Article Content</label>
                    <textarea id="content" rows="8" placeholder="Type your story here..." class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none transition-all"></textarea>
                </div>

                <button onclick="generateAndDownload()" class="w-full bg-red-600 hover:bg-red-700 text-white font-black py-4 rounded-xl transition-all shadow-lg shadow-red-200 uppercase tracking-[0.2em] text-sm">
                    Generate
                </button>
            </div>
        </section>

        <!-- Preview Status -->
        <section class="flex flex-col h-full">
            <div class="bg-slate-800 p-6 rounded-2xl shadow-inner flex flex-col h-full text-white">
                <div class="flex justify-between items-center mb-4 border-b border-slate-700 pb-2">
                    <h2 class="font-bold text-lg">System Status</h2>
                    <span id="statusLabel" class="text-[10px] bg-slate-700 px-2 py-1 rounded text-slate-400 font-bold uppercase">Ready</span>
                </div>
                
                <div id="logArea" class="flex-grow font-mono text-xs space-y-2 overflow-y-auto max-h-[400px] text-slate-400">
                    <p>> Generator system initialized...</p>
                    <p>> Waiting for user input...</p>
                </div>
                
                <div class="mt-4 p-4 bg-slate-900 rounded-lg border border-slate-700">
                    <p class="text-[10px] text-slate-500 leading-relaxed italic uppercase font-bold tracking-wider">
                        Instruction:
                    </p>
                    <p class="text-[10px] text-slate-400 mt-1">
                        Sistem otomatis memperbaiki kapitalisasi awal kalimat. Nama file: [random_number].html.
                    </p>
                </div>
            </div>
        </section>

    </main>

    <script>
        function addLog(message, type = 'info') {
            const logArea = document.getElementById('logArea');
            const p = document.createElement('p');
            const color = type === 'success' ? 'text-green-400' : 'text-slate-400';
            p.className = color;
            p.innerText = "> " + message;
            logArea.appendChild(p);
            logArea.scrollTop = logArea.scrollHeight;
        }

        // Fungsi untuk mengubah huruf pertama setiap kata menjadi besar (untuk Judul/Kategori)
        function toTitleCase(str) {
            return str.toLowerCase().split(' ').map(word => {
                return word.charAt(0).toUpperCase() + word.slice(1);
            }).join(' ');
        }

        // Fungsi untuk mengubah huruf pertama setiap kalimat menjadi besar (untuk Isi Artikel)
        function toSentenceCase(str) {
            if (!str) return "";
            return str.toLowerCase().replace(/(^\s*\w|[\.\!\?]\s*\w)/g, function(c) {
                return c.toUpperCase();
            });
        }

        function generateAndDownload() {
            let rawTitle = document.getElementById('title').value || 'Headline News Title';
            let rawCategory = document.getElementById('category').value || 'General';
            let imageUrl = document.getElementById('imageUrl').value || 'https://via.placeholder.com/800x450';
            let rawContent = document.getElementById('content').value || 'Your content goes here...';
            
            // Auto Capitalization
            const title = toTitleCase(rawTitle);
            const category = toTitleCase(rawCategory);
            const contentFormatted = toSentenceCase(rawContent);

            const date = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

            // Generate Random ID (max 7 digits)
            const randomId = Math.floor(Math.random() * 9000000) + 1000000;
            const fileName = randomId + ".html";

            addLog("Processing text and generating: " + title.substring(0, 20) + "...");

            // Process content into paragraphs
            const contentHtml = contentFormatted.split('\n').map(p => {
                const trimmed = p.trim();
                return trimmed ? "<p>" + trimmed + "</p>" : "";
            }).join('');

            // HTML Template
            const template = '<!DOCTYPE html>\n' +
'<html lang="en">\n' +
'<head>\n' +
'    <meta charset="UTF-8">\n' +
'    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n' +
'    <title>' + title + '</title>\n' +
'    <script src="https://cdn.tailwindcss.com"><\/script>\n' +
'    <style>\n' +
'        @import url(\'https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap\');\n' +
'        body { font-family: \'Inter\', sans-serif; background-color: #f8fafc; color: #0f172a; }\n' +
'        .news-content p { line-height: 1.8; margin-bottom: 1.5rem; font-size: 1.125rem; }\n' +
'        .share-btn-fb { background-color: #1877F2; transition: transform 0.2s; }\n' +
'        .share-btn-fb:active { transform: scale(0.96); }\n' +
'        .sticky-header { position: sticky; top: 0; z-index: 50; }\n' +
'    </style>\n' +
'</head>\n' +
'<body class="antialiased">\n' +
'    <header class="sticky-header bg-red-700 text-white shadow-lg">\n' +
'        <div class="max-w-3xl mx-auto px-4 py-3 flex justify-between items-center">\n' +
'            <h1 class="text-xl font-extrabold tracking-tighter uppercase italic">Breaking<span class="text-yellow-400">News</span></h1>\n' +
'            <div class="flex items-center gap-2">\n' +
'                <span class="relative flex h-3 w-3">\n' +
'                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span>\n' +
'                    <span class="relative inline-flex rounded-full h-3 w-3 bg-yellow-500"></span>\n' +
'                </span>\n' +
'                <span class="text-xs font-bold tracking-widest uppercase text-yellow-100">Live Updates</span>\n' +
'            </div>\n' +
'        </div>\n' +
'    </header>\n' +
'\n' +
'    <main class="max-w-3xl mx-auto bg-white min-h-screen shadow-xl border-x border-gray-100">\n' +
'        <article class="px-5 py-8">\n' +
'            <div class="mb-6">\n' +
'                <span class="inline-block bg-red-100 text-red-700 font-bold text-xs px-3 py-1 rounded-full uppercase tracking-widest mb-3 text-[10px]">' + category + '</span>\n' +
'                <h2 class="text-3xl md:text-4xl font-extrabold leading-tight tracking-tight text-slate-900">' + title + '</h2>\n' +
'                <div class="flex items-center text-slate-500 text-sm mt-4 border-b border-gray-100 pb-4">\n' +
'                    <span class="font-bold text-slate-800">Global Desk</span>\n' +
'                    <span class="mx-2">•</span>\n' +
'                    <span>' + date + '</span>\n' +
'                    <span class="mx-2">•</span>\n' +
'                    <span>4 min read</span>\n' +
'                </div>\n' +
'            </div>\n' +
'\n' +
'            <div class="w-full mb-8 overflow-hidden rounded-2xl shadow-sm">\n' +
'                <img src="' + imageUrl + '" alt="' + title + '" class="w-full h-auto object-cover border border-slate-100">\n' +
'            </div>\n' +
'\n' +
'            <section class="news-content text-slate-700">\n' +
'                ' + contentHtml + '\n' +
'            </section>\n' +
'\n' +
'            <div class="mt-12 mb-8 p-6 bg-slate-50 rounded-3xl border border-slate-100">\n' +
'                <h4 class="text-center text-slate-800 font-bold text-lg mb-4">Share this breaking story</h4>\n' +
'                <button onclick="shareToFacebook()" class="share-btn-fb w-full flex items-center justify-center gap-4 py-5 rounded-2xl text-white font-black text-xl shadow-blue-200 shadow-xl">\n' +
'                    <svg class="w-8 h-8 fill-current" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>\n' +
'                    SHARE ON FACEBOOK\n' +
'                </button>\n' +
'            </div>\n' +
'        </article>\n' +
'\n' +
'        <footer class="py-12 px-5 text-center bg-slate-900 text-slate-500 text-sm">\n' +
'            <h2 class="text-white font-black italic tracking-tighter mb-4 text-xl uppercase tracking-tighter">Breaking<span class="text-red-500">News</span></h2>\n' +
'            <p class="text-xs">&copy; 2026 Breaking News Network. All Rights Reserved.</p>\n' +
'        </footer>\n' +
'    </main>\n' +
'\n' +
'    <script>\n' +
'        function shareToFacebook() {\n' +
'            const url = encodeURIComponent(window.location.href);\n' +
'            const fbShareUrl = "https://www.facebook.com/sharer/sharer.php?u=" + url;\n' +
'            window.open(fbShareUrl, "_blank", "width=600,height=400");\n' +
'        }\n' +
'    <\/script>\n' +
'</body>\n' +
'</html>';

            // Download logic
            try {
                const blob = new Blob([template], { type: 'text/html' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = fileName;
                document.body.appendChild(a);
                a.click();
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);

                addLog("File " + fileName + " berhasil diunduh.", 'success');
                document.getElementById('statusLabel').innerText = "Tersimpan: " + fileName;
                document.getElementById('statusLabel').className = "text-[10px] bg-green-900 px-2 py-1 rounded text-green-400 font-bold uppercase";
            } catch (err) {
                addLog("Error saat mengunduh: " + err.message);
            }
        }
    </script>
</body>
</html>
